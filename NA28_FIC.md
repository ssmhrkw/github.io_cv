#NA28_FIC 
(更新日：２０２５１０２２）

このHTMLファイルは、「**RND Reader**」という名称の、**オクターブバンド（OCT）**および**$1/3$ オクターブバンド（$1/3$ OCT）**の騒音測定結果（**Shift-JIS CSV**形式のファイル、通常 `.rnd` や `.csv` 拡張子）を読み込み、グラフ化および表形式で表示するためのウェブアプリケーションです。

すべての計算・処理はブラウザの**ローカル環境**で行われるため、アップロードの心配はありません。グラフ描画には **Plotly.js** ライブラリを使用しています。
了解しました。提供されたHTMLコードに基づき、この「**RND Reader**」ツールの使い方を説明します。

---

## 💻 RND Reader の使い方

「RND Reader」は、騒音計で測定された**オクターブバンド（OCT）**および**$1/3$ オクターブバンド（$1/3$ OCT）**のデータを格納した**Shift-JIS CSV形式（`.RND` や `.CSV` 拡張子）**のファイルを読み込み、グラフと表で可視化するローカルアプリケーションです。

### 1. ⚠️ 注意勧告の確認

ページを開くと、最初に「**注意勧告**」モーダルが表示されます。

* このツールは**参考用**であり、結果の最終確認は利用者自身の責任で行う必要があることが記載されています。
* ファイルはサーバーに**アップロードされず**、すべての計算がブラウザ内でローカルに行われるため、プライバシー上の問題はありません。
* 内容を確認したら、「**OK**」ボタンを押してアプリケーションの本体へ進んでください。

***

### 2. データの読み込み

ファイルを読み込む方法は2つあります。

#### A. ドラッグ＆ドロップ（推奨）

* 画面中央にある点線枠「**ここにドラッグ＆ドロップ（RND/CSV, Shift-JIS, コンマ区切り）**」内に、解析したいファイルを**一つまたは複数**まとめてドラッグ＆ドロップします。

#### B. ファイル選択ボタン

* 「**ファイル選択（複数可）**」ボタンをクリックし、PCのファイル選択ダイアログからファイルを選びます。

読み込みが完了すると、「読み込み済み」の項目にファイル名がバッジ形式で表示されます。

***

### 3. 解析結果の表示

ファイルが読み込まれると、自動的に解析が開始され、結果が表示されます。

#### 📈 周波数帯域の切り替え

画面上部のタブで、表示したい周波数帯域を切り替えます。

1.  **OCT**: オクターブバンド（$1/1$ オクターブ）解析結果を表示します。
2.  **1/3 OCT**: $1/3$ オクターブバンド解析結果を表示します。

#### 📊 グラフ（$3 \times 3$ グリッド）の確認

選択した周波数帯域のパネルには、まずグラフが表示されます。

* **表示内容**: 各ファイルについて、騒音レベルの $9$ 種類のデータ系列（$L_{\text{eq}}, L_{\text{max}}, L_{\text{min}}, L_{\text{E}}, L_{\text{N1}} \sim L_{\text{N5}}$）が、それぞれ個別のグラフにプロットされます。
* **グラフ軸**:
    * **横軸**: 周波数（$\text{Hz}$）
    * **縦軸**: 騒音レベル（$\text{dB}$）
* **ファイル識別**: 複数のファイルを読み込んだ場合、各ファイルが色分けされて同じグラフ内に描画されます。

#### 📝 詳細な数値表の確認

グラフの下にある「**表（系列ごと・行＝ファイル、列＝周波数）を表示**」と書かれたサマリー（`Summary`）をクリックすると、詳細な数値表が表示されます。

* この表は、グラフで使用された生データ（周波数ごとの $\text{dB}$ 値）を、データ系列（例: $L_{\text{eq}}$）ごとに一覧表示します。
* **行**: 読み込んだファイル名
* **列**: 周波数（$\text{Hz}$）
* **固定列**: ファイル名の列は**固定**（Sticky）されているため、周波数が多い場合でもスクロールせずにファイル名を追うことができます。
---

## 💻 アプリケーションの概要

### 目的

騒音計の出力ファイル（Shift-JIS CSV形式の RND ファイル）から、以下の**音響時系列データ**を抽出・解析・可視化します。

| データ系列 | 意味 |
| :--- | :--- |
| **$L_{\text{eq}}$** | 等価騒音レベル |
| **$L_{\text{E}}$** | 単発暴露騒音レベル |
| **$L_{\text{max}}$** | 最大騒音レベル |
| **$L_{\text{min}}$** | 最小騒音レベル |
| **$L_{\text{N1}} \sim L_{\text{N5}}$** | パーセンタイル騒音レベル（$L_{5}, L_{10}, \dots$ などの可能性） |

### 機能

1.  **ファイル読み込み**: ドラッグ＆ドロップ、またはファイル選択ボタンにより、複数の Shift-JIS CSV ファイルを読み込み可能です。
2.  **データ解析**: 読み込んだ CSV ファイルを解析し、周波数（OCT / $1/3$ OCT）ごとの各音響データ系列を抽出します。
3.  **タブ切り替え**: 「**OCT**」と「**1/3 OCT**」のタブで、それぞれの周波数解析結果を切り替えて表示できます。
4.  **グラフ表示**: Plotly.js を使用し、各データ系列（$L_{\text{eq}}, L_{\text{max}}, \dots$）ごとに $3$ 行 $\times 3$ 列の**合計 $9$ 枚のグラフ**で周波数特性を表示します。
5.  **データ表**: 各データ系列について、ファイルと周波数を軸とした**数値テーブル**を表示します。

---

## ⚠️ 注意勧告ゲート

アプリケーションの起動時には、以下の内容を含む**注意勧告モーダルウィンドウ**が表示されます。これはユーザーが「OK」を押すまで操作をロック（`aria-hidden="true"`）し、利用者にツールの限界と責任の所在を明確にするためのものです。

-   **ツールの目的**: **参考用**であり、結果の最終確認は利用者の責任で行う必要があります。
-   **プライバシー**: ファイルはアップロードされず、計算はすべて**ローカル**で行われます。
-   **既知の問題点（開発者向け）**:
    -   見たいものだけを選択する機能がない（現在は全表示）。
    -   `SUB` と `Main`（$1/1$ OCT）の線がつながっている点を変更する必要がある。

---

## 📊 表示されるデータ系列

以下の $9$ 種類のデータ系列が、それぞれ個別のグラフと表で表示されます（`SERIES_ORDER`）。

| 略称 | 日本語名（推測） |
| :--- | :--- |
| $\mathbf{L_{\text{eq}}}$ | 等価騒音レベル |
| $\mathbf{L_{\text{E}}}$ | 単発暴露騒音レベル |
| $\mathbf{L_{\text{max}}}$ | 最大騒音レベル |
| $\mathbf{L_{\text{min}}}$ | 最小騒音レベル |
| $\mathbf{L_{\text{N1}}}$ | パーセンタイル騒音レベル $L_N$（例: $L_1$ または $L_5$）|
| $\mathbf{L_{\text{N2}}}$ | パーセンタイル騒音レベル $L_N$ |
| $\mathbf{L_{\text{N3}}}$ | パーセンタイル騒音レベル $L_N$ |
| $\mathbf{L_{\text{N4}}}$ | パーセンタイル騒音レベル $L_N$ |
| $\mathbf{L_{\text{N5}}}$ | パーセンタイル騒音レベル $L_N$ |

※ データは $L_{\text{p Over}}$ や $L_{\text{p Under}}$ といった項目を除外して処理されます。
